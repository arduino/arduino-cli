
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arduino Command Line Interface">
      
      
      
      
        <link rel="canonical" href="https://arduino.github.io/arduino-cli/dev/UPGRADING/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Upgrading - Arduino CLI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="orange">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrading" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Arduino CLI" class="md-header__button md-logo" aria-label="Arduino CLI" data-md-component="logo">
      
  <img src="../img/icon_mac_light.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Arduino CLI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Upgrading
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/arduino/arduino-cli/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Arduino CLI" class="md-nav__button md-logo" aria-label="Arduino CLI" data-md-component="logo">
      
  <img src="../img/icon_mac_light.png" alt="logo">

    </a>
    Arduino CLI
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/arduino/arduino-cli/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    arduino/arduino-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Upgrading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Upgrading
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0200" class="md-nav__link">
    0.20.0
  </a>
  
    <nav class="md-nav" aria-label="0.20.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-details-arguments-change" class="md-nav__link">
    board details arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#board-attach-arguments-change" class="md-nav__link">
    board attach arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout" class="md-nav__link">
    --timeout flag in board list command has been replaced by --discovery-timeout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0190" class="md-nav__link">
    0.19.0
  </a>
  
    <nav class="md-nav" aria-label="0.19.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-list-command-json-output-change" class="md-nav__link">
    board list command JSON output change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes" class="md-nav__link">
    gRPC interface DebugConfigRequest, UploadRequest, UploadUsingProgrammerRequest, BurnBootloaderRequest, DetectedPort field changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-boardlistitem-change" class="md-nav__link">
    gRPC interface BoardListItem change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-public-library-interface" class="md-nav__link">
    Change public library interface
  </a>
  
    <nav class="md-nav" aria-label="Change public library interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clii18n-package" class="md-nav__link">
    github.com/arduino/arduino-cli/i18n package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinobuilder-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/builder package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketch-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketch package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketches-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketches package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clilegacybuildertypes-package" class="md-nav__link">
    github.com/arduino/arduino-cli/legacy/builder/types package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-in-board-details-response-grpc-and-json-output" class="md-nav__link">
    Change in board details response (gRPC and JSON output)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-init-function" class="md-nav__link">
    Change of behaviour of gRPC Init function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removal-of-grpc-rescan-function" class="md-nav__link">
    Removal of gRPC Rescan function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions" class="md-nav__link">
    Change of behaviour of gRPC UpdateIndex and UpdateLibrariesIndex functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-rarely-used-golang-api" class="md-nav__link">
    Removed rarely used golang API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0180" class="md-nav__link">
    0.18.0
  </a>
  
    <nav class="md-nav" aria-label="0.18.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-grpc-api-and-cli-json-output" class="md-nav__link">
    Breaking changes in gRPC API and CLI JSON output.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-api-breaking-changes" class="md-nav__link">
    gRPC API breaking changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-cli-json-output-breaking-changes" class="md-nav__link">
    arduino-cli JSON output breaking changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0160" class="md-nav__link">
    0.16.0
  </a>
  
    <nav class="md-nav" aria-label="0.16.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-type-of-compilereqexportbinaries-message-in-grpc-interface" class="md-nav__link">
    Change type of CompileReq.ExportBinaries message in gRPC interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0150" class="md-nav__link">
    0.15.0
  </a>
  
    <nav class="md-nav" aria-label="0.15.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rename-telemetry-settings-to-metrics" class="md-nav__link">
    Rename telemetry settings to metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0140" class="md-nav__link">
    0.14.0
  </a>
  
    <nav class="md-nav" aria-label="0.14.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-in-debug-command" class="md-nav__link">
    Changes in debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binaries-export-must-now-be-explicitly-specified" class="md-nav__link">
    Binaries export must now be explicitly specified
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmers-cant-be-listed-anymore-using-burn-bootloader-p-list" class="md-nav__link">
    Programmers can't be listed anymore using burn-bootloader -P list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled" class="md-nav__link">
    lib install --git-url and --zip-file must now be explicitly enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-behaviour-of-config-file-flag-with-config-commands" class="md-nav__link">
    Change behaviour of --config-file flag with config commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../command-line-completion/" class="md-nav__link">
        Command line completion
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        How to contribute
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Command reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Command reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Command reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli/" class="md-nav__link">
        arduino-cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board/" class="md-nav__link">
        board
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_attach/" class="md-nav__link">
        board attach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_details/" class="md-nav__link">
        board details
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_list/" class="md-nav__link">
        board list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_listall/" class="md-nav__link">
        board listall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_board_search/" class="md-nav__link">
        board search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_burn-bootloader/" class="md-nav__link">
        burn-bootloader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_cache/" class="md-nav__link">
        cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_cache_clean/" class="md-nav__link">
        cache clean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_compile/" class="md-nav__link">
        compile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_completion/" class="md-nav__link">
        completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_dump/" class="md-nav__link">
        config dump
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_init/" class="md-nav__link">
        config init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_add/" class="md-nav__link">
        config add
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_delete/" class="md-nav__link">
        config delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_remove/" class="md-nav__link">
        config remove
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_config_set/" class="md-nav__link">
        config set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core/" class="md-nav__link">
        core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_download/" class="md-nav__link">
        core download
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_install/" class="md-nav__link">
        core install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_list/" class="md-nav__link">
        core list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_search/" class="md-nav__link">
        core search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_uninstall/" class="md-nav__link">
        core uninstall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_update-index/" class="md-nav__link">
        core update-index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_core_upgrade/" class="md-nav__link">
        core upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_daemon/" class="md-nav__link">
        daemon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib/" class="md-nav__link">
        lib
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_deps/" class="md-nav__link">
        lib deps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_download/" class="md-nav__link">
        lib download
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_examples/" class="md-nav__link">
        lib examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_install/" class="md-nav__link">
        lib install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_list/" class="md-nav__link">
        lib list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_search/" class="md-nav__link">
        lib search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_uninstall/" class="md-nav__link">
        lib uninstall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_update-index/" class="md-nav__link">
        lib update-index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_lib_upgrade/" class="md-nav__link">
        lib upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_monitor/" class="md-nav__link">
        monitor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_outdated/" class="md-nav__link">
        outdated
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_sketch/" class="md-nav__link">
        sketch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_sketch_archive/" class="md-nav__link">
        sketch archive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_sketch_new/" class="md-nav__link">
        sketch new
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_update/" class="md-nav__link">
        update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_upgrade/" class="md-nav__link">
        upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_upload/" class="md-nav__link">
        upload
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/arduino-cli_version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          gRPC reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="gRPC reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          gRPC reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/monitor/" class="md-nav__link">
        monitor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/settings/" class="md-nav__link">
        settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpc/debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../integration-options/" class="md-nav__link">
        Integration options
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sketch-build-process/" class="md-nav__link">
        Sketch build process
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sketch-specification/" class="md-nav__link">
        Sketch specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../library-specification/" class="md-nav__link">
        Library specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../platform-specification/" class="md-nav__link">
        Platform specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pluggable-discovery-specification/" class="md-nav__link">
        Pluggable discovery specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pluggable-monitor-specification/" class="md-nav__link">
        Pluggable monitor specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../package_index_json-specification/" class="md-nav__link">
        Package index specification
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0200" class="md-nav__link">
    0.20.0
  </a>
  
    <nav class="md-nav" aria-label="0.20.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-details-arguments-change" class="md-nav__link">
    board details arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#board-attach-arguments-change" class="md-nav__link">
    board attach arguments change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout" class="md-nav__link">
    --timeout flag in board list command has been replaced by --discovery-timeout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0190" class="md-nav__link">
    0.19.0
  </a>
  
    <nav class="md-nav" aria-label="0.19.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#board-list-command-json-output-change" class="md-nav__link">
    board list command JSON output change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes" class="md-nav__link">
    gRPC interface DebugConfigRequest, UploadRequest, UploadUsingProgrammerRequest, BurnBootloaderRequest, DetectedPort field changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-interface-boardlistitem-change" class="md-nav__link">
    gRPC interface BoardListItem change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-public-library-interface" class="md-nav__link">
    Change public library interface
  </a>
  
    <nav class="md-nav" aria-label="Change public library interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clii18n-package" class="md-nav__link">
    github.com/arduino/arduino-cli/i18n package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinobuilder-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/builder package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketch-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketch package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-cliarduinosketches-package" class="md-nav__link">
    github.com/arduino/arduino-cli/arduino/sketches package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#githubcomarduinoarduino-clilegacybuildertypes-package" class="md-nav__link">
    github.com/arduino/arduino-cli/legacy/builder/types package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-in-board-details-response-grpc-and-json-output" class="md-nav__link">
    Change in board details response (gRPC and JSON output)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-init-function" class="md-nav__link">
    Change of behaviour of gRPC Init function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removal-of-grpc-rescan-function" class="md-nav__link">
    Removal of gRPC Rescan function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions" class="md-nav__link">
    Change of behaviour of gRPC UpdateIndex and UpdateLibrariesIndex functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-rarely-used-golang-api" class="md-nav__link">
    Removed rarely used golang API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0180" class="md-nav__link">
    0.18.0
  </a>
  
    <nav class="md-nav" aria-label="0.18.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#breaking-changes-in-grpc-api-and-cli-json-output" class="md-nav__link">
    Breaking changes in gRPC API and CLI JSON output.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grpc-api-breaking-changes" class="md-nav__link">
    gRPC API breaking changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-cli-json-output-breaking-changes" class="md-nav__link">
    arduino-cli JSON output breaking changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0160" class="md-nav__link">
    0.16.0
  </a>
  
    <nav class="md-nav" aria-label="0.16.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-type-of-compilereqexportbinaries-message-in-grpc-interface" class="md-nav__link">
    Change type of CompileReq.ExportBinaries message in gRPC interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0150" class="md-nav__link">
    0.15.0
  </a>
  
    <nav class="md-nav" aria-label="0.15.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rename-telemetry-settings-to-metrics" class="md-nav__link">
    Rename telemetry settings to metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0140" class="md-nav__link">
    0.14.0
  </a>
  
    <nav class="md-nav" aria-label="0.14.0">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-in-debug-command" class="md-nav__link">
    Changes in debug command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binaries-export-must-now-be-explicitly-specified" class="md-nav__link">
    Binaries export must now be explicitly specified
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmers-cant-be-listed-anymore-using-burn-bootloader-p-list" class="md-nav__link">
    Programmers can't be listed anymore using burn-bootloader -P list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled" class="md-nav__link">
    lib install --git-url and --zip-file must now be explicitly enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-behaviour-of-config-file-flag-with-config-commands" class="md-nav__link">
    Change behaviour of --config-file flag with config commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/arduino/arduino-cli/blob/master/docs/UPGRADING.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="upgrading">Upgrading<a class="headerlink" href="#upgrading" title="Permanent link">&para;</a></h1>
<p>Here you can find a list of migration guides to handle breaking changes between releases of the CLI.</p>
<h2 id="0200">0.20.0<a class="headerlink" href="#0200" title="Permanent link">&para;</a></h2>
<h3 id="board-details-arguments-change"><code>board details</code> arguments change<a class="headerlink" href="#board-details-arguments-change" title="Permanent link">&para;</a></h3>
<p>The <code>board details</code> command now accepts only the <code>--fqbn</code> or <code>-b</code> flags to specify the FQBN.</p>
<p>The previously deprecated <code>board details &lt;FQBN&gt;</code> syntax is no longer supported.</p>
<h3 id="board-attach-arguments-change"><code>board attach</code> arguments change<a class="headerlink" href="#board-attach-arguments-change" title="Permanent link">&para;</a></h3>
<p>The <code>board attach</code> command now uses <code>--port</code> and <code>-p</code> flags to set board port and <code>--board</code> and <code>-b</code> flags to select its
FQBN.</p>
<p>The previous syntax <code>board attach &lt;port&gt;|&lt;FQBN&gt; [sketchPath]</code> is no longer supported.</p>
<h3 id="-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout"><code>--timeout</code> flag in <code>board list</code> command has been replaced by <code>--discovery-timeout</code><a class="headerlink" href="#-timeout-flag-in-board-list-command-has-been-replaced-by-discovery-timeout" title="Permanent link">&para;</a></h3>
<p>The flag <code>--timeout</code> in the <code>board list</code> command is no longer supported.</p>
<h2 id="0190">0.19.0<a class="headerlink" href="#0190" title="Permanent link">&para;</a></h2>
<h3 id="board-list-command-json-output-change"><code>board list</code> command JSON output change<a class="headerlink" href="#board-list-command-json-output-change" title="Permanent link">&para;</a></h3>
<p>The <code>board list</code> command JSON output has been changed quite a bit, from:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board list --format json
[
  {
    &quot;address&quot;: &quot;/dev/ttyACM1&quot;,
    &quot;protocol&quot;: &quot;serial&quot;,
    &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
    &quot;boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Uno&quot;,
        &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x0043&quot;
      }
    ],
    &quot;serial_number&quot;: &quot;954323132383515092E1&quot;
  }
]
</code></pre></div>
<p>to:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board list --format json
[
  {
    &quot;matching_boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Uno&quot;,
        &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;
      }
    ],
    &quot;port&quot;: {
      &quot;address&quot;: &quot;/dev/ttyACM1&quot;,
      &quot;label&quot;: &quot;/dev/ttyACM1&quot;,
      &quot;protocol&quot;: &quot;serial&quot;,
      &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x0043&quot;,
        &quot;serialNumber&quot;: &quot;954323132383515092E1&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    }
  }
]
</code></pre></div>
<p>The <code>boards</code> array has been renamed <code>matching_boards</code>, each contained object will now contain only <code>name</code> and <code>fqbn</code>.
Properties that can be used to identify a board are now moved to the new <code>properties</code> object, it can contain any key
name. <code>pid</code> and <code>vid</code> have been moved to <code>properties</code>, <code>serial_number</code> has been renamed <code>serialNumber</code> and moved to
<code>properties</code>. The new <code>label</code> field is the name of the <code>port</code> if it should be displayed in a GUI.</p>
<h3 id="grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes">gRPC interface <code>DebugConfigRequest</code>, <code>UploadRequest</code>, <code>UploadUsingProgrammerRequest</code>, <code>BurnBootloaderRequest</code>, <code>DetectedPort</code> field changes<a class="headerlink" href="#grpc-interface-debugconfigrequest-uploadrequest-uploadusingprogrammerrequest-burnbootloaderrequest-detectedport-field-changes" title="Permanent link">&para;</a></h3>
<p><code>DebugConfigRequest</code>, <code>UploadRequest</code>, <code>UploadUsingProgrammerRequest</code> and <code>BurnBootloaderRequest</code> had their <code>port</code> field
change from type <code>string</code> to <code>Port</code>.</p>
<p><code>Port</code> contains the following information:</p>
<div class="highlight"><pre><span></span><code>// Port represents a board port that may be used to upload or to monitor a board
message Port {
  // Address of the port (e.g., `/dev/ttyACM0`).
  string address = 1;
  // The port label to show on the GUI (e.g. &quot;ttyACM0&quot;)
  string label = 2;
  // Protocol of the port (e.g., `serial`, `network`, ...).
  string protocol = 3;
  // A human friendly description of the protocol (e.g., &quot;Serial Port (USB)&quot;
  string protocol_label = 4;
  // A set of properties of the port
  map&lt;string, string&gt; properties = 5;
}
</code></pre></div>
<p>The gRPC interface message <code>DetectedPort</code> has been changed from:</p>
<div class="highlight"><pre><span></span><code>message DetectedPort {
  // Address of the port (e.g., `serial:///dev/ttyACM0`).
  string address = 1;
  // Protocol of the port (e.g., `serial`).
  string protocol = 2;
  // A human friendly description of the protocol (e.g., &quot;Serial Port (USB)&quot;).
  string protocol_label = 3;
  // The boards attached to the port.
  repeated BoardListItem boards = 4;
  // Serial number of connected board
  string serial_number = 5;
}
</code></pre></div>
<p>to:</p>
<div class="highlight"><pre><span></span><code>message DetectedPort {
  // The possible boards attached to the port.
  repeated BoardListItem matching_boards = 1;
  // The port details
  Port port = 2;
}
</code></pre></div>
<p>The properties previously contained directly in the message are now stored in the <code>port</code> property.</p>
<p>These changes are necessary for the pluggable discovery.</p>
<h3 id="grpc-interface-boardlistitem-change">gRPC interface <code>BoardListItem</code> change<a class="headerlink" href="#grpc-interface-boardlistitem-change" title="Permanent link">&para;</a></h3>
<p>The <code>vid</code> and <code>pid</code> fields of the <code>BoardListItem</code> message have been removed. They used to only be available when
requesting connected board lists, now that information is stored in the <code>port</code> field of <code>DetectedPort</code>.</p>
<h3 id="change-public-library-interface">Change public library interface<a class="headerlink" href="#change-public-library-interface" title="Permanent link">&para;</a></h3>
<h4 id="githubcomarduinoarduino-clii18n-package"><code>github.com/arduino/arduino-cli/i18n</code> package<a class="headerlink" href="#githubcomarduinoarduino-clii18n-package" title="Permanent link">&para;</a></h4>
<p>The behavior of the <code>Init</code> function has changed. The user specified locale code is no longer read from the
<code>github.com/arduino/arduino-cli/configuration</code> package and now must be passed directly to <code>Init</code> as a string:</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="p">.</span><span class="nx">Init</span><span class="p">(</span><span class="s">&quot;it&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Omit the argument for automated locale detection:</p>
<div class="highlight"><pre><span></span><code><span class="nx">i18n</span><span class="p">.</span><span class="nx">Init</span><span class="p">()</span>
</code></pre></div>
<h4 id="githubcomarduinoarduino-cliarduinobuilder-package"><code>github.com/arduino/arduino-cli/arduino/builder</code> package<a class="headerlink" href="#githubcomarduinoarduino-cliarduinobuilder-package" title="Permanent link">&para;</a></h4>
<p><code>GenBuildPath()</code> function has been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package. The signature is
unchanged.</p>
<p><code>EnsureBuildPathExists</code> function from has been completely removed, in its place use
<code>github.com/arduino/go-paths-helper.MkDirAll()</code>.</p>
<p><code>SketchSaveItemCpp</code> function signature is changed from <code>path string, contents []byte, destPath string</code> to
<code>path *paths.Path, contents []byte, destPath *paths.Path</code>. <code>paths</code> is <code>github.com/arduino/go-paths-helper</code>.</p>
<p><code>SketchLoad</code> function has been removed, in its place use <code>New</code> from <code>github.com/arduino/arduino-cli/arduino/sketch</code>
package.</p>
<div class="highlight"><pre><span></span><code><span class="gd">-      SketchLoad(&quot;/some/path&quot;, &quot;&quot;)</span>
<span class="gi">+      sketch.New(paths.New(&quot;some/path))</span>
}
</code></pre></div>
<p>If you need to set a custom build path you must instead set it after creating the Sketch.</p>
<div class="highlight"><pre><span></span><code><span class="gd">-      SketchLoad(&quot;/some/path&quot;, &quot;/my/build/path&quot;)</span>
<span class="gi">+      s, err := sketch.New(paths.New(&quot;some/path))</span>
<span class="gi">+      s.BuildPath = paths.new(&quot;/my/build/path&quot;)</span>
}
</code></pre></div>
<p><code>SketchCopyAdditionalFiles</code> function signature is changed from
<code>sketch *sketch.Sketch, destPath string, overrides map[string]string</code> to
<code>sketch *sketch.Sketch, destPath *paths.Path, overrides map[string]string</code>.</p>
<h4 id="githubcomarduinoarduino-cliarduinosketch-package"><code>github.com/arduino/arduino-cli/arduino/sketch</code> package<a class="headerlink" href="#githubcomarduinoarduino-cliarduinosketch-package" title="Permanent link">&para;</a></h4>
<p><code>Item</code> struct has been removed, use <code>go-paths-helper.Path</code> in its place.</p>
<p><code>NewItem</code> has been removed too, use <code>go-paths-helper.New</code> in its place.</p>
<p><code>GetSourceBytes</code> has been removed, in its place use <code>go-paths-helper.Path.ReadFile</code>. <code>GetSourceStr</code> too has been
removed, in its place:</p>
<div class="highlight"><pre><span></span><code><span class="gd">-      s, err := item.GetSourceStr()</span>
<span class="gi">+      data, err := file.ReadFile()</span>
<span class="gi">+      s := string(data)</span>
}
</code></pre></div>
<p><code>ItemByPath</code> type and its member functions have been removed, use <code>go-paths-helper.PathList</code> in its place.</p>
<p><code>Sketch.LocationPath</code> has been renamed to <code>FullPath</code> and its type changed from <code>string</code> to <code>go-paths-helper.Path</code>.</p>
<p><code>Sketch.MainFile</code> type has changed from <code>*Item</code> to <code>go-paths-helper.Path</code>. <code>Sketch.OtherSketchFiles</code>,
<code>Sketch.AdditionalFiles</code> and <code>Sketch.RootFolderFiles</code> type has changed from <code>[]*Item</code> to <code>go-paths-helper.PathList</code>.</p>
<p><code>New</code> signature has been changed from <code>sketchFolderPath, mainFilePath, buildPath string, allFilesPaths []string</code> to
<code>path *go-paths-helper.Path</code>.</p>
<p><code>CheckSketchCasing</code> function is now private, the check is done internally by <code>New</code>.</p>
<p><code>InvalidSketchFoldernameError</code> has been renamed <code>InvalidSketchFolderNameError</code>.</p>
<h4 id="githubcomarduinoarduino-cliarduinosketches-package"><code>github.com/arduino/arduino-cli/arduino/sketches</code> package<a class="headerlink" href="#githubcomarduinoarduino-cliarduinosketches-package" title="Permanent link">&para;</a></h4>
<p><code>Sketch</code> struct has been merged with <code>sketch.Sketch</code> struct.</p>
<p><code>Metadata</code> and <code>BoardMetadata</code> structs have been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package.</p>
<p><code>NewSketchFromPath</code> has been deleted, use <code>sketch.New</code> in its place.</p>
<p><code>ImportMetadata</code> is now private called internally by <code>sketch.New</code>.</p>
<p><code>ExportMetadata</code> has been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package.</p>
<p><code>BuildPath</code> has been removed, use <code>sketch.Sketch.BuildPath</code> in its place.</p>
<p><code>CheckForPdeFiles</code> has been moved to <code>github.com/arduino/arduino-cli/arduino/sketch</code> package.</p>
<h4 id="githubcomarduinoarduino-clilegacybuildertypes-package"><code>github.com/arduino/arduino-cli/legacy/builder/types</code> package<a class="headerlink" href="#githubcomarduinoarduino-clilegacybuildertypes-package" title="Permanent link">&para;</a></h4>
<p><code>Sketch</code> has been removed, use <code>sketch.Sketch</code> in its place.</p>
<p><code>SketchToLegacy</code> and <code>SketchFromLegacy</code> have been removed, nothing replaces them.</p>
<p><code>Context.Sketch</code> types has been changed from <code>Sketch</code> to <code>sketch.Sketch</code>.</p>
<h3 id="change-in-board-details-response-grpc-and-json-output">Change in <code>board details</code> response (gRPC and JSON output)<a class="headerlink" href="#change-in-board-details-response-grpc-and-json-output" title="Permanent link">&para;</a></h3>
<p>The <code>board details</code> output WRT board identification properties has changed, before it was:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board details arduino:samd:mkr1000
Board name:                Arduino MKR1000
FQBN:                      arduino:samd:mkr1000
Board version:             1.8.11
Debugging supported:       

Official Arduino board:    

Identification properties: VID:0x2341 PID:0x824e
                           VID:0x2341 PID:0x024e
                           VID:0x2341 PID:0x804e
                           VID:0x2341 PID:0x004e
[...]

$ arduino-cli board details arduino:samd:mkr1000 --format json
[...]
  &quot;identification_prefs&quot;: [
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x804e&quot;
      }
    },
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x004e&quot;
      }
    },
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x824e&quot;
      }
    },
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x024e&quot;
      }
    }
  ],
[...]
</code></pre></div>
<p>now the properties have been renamed from <code>identification_prefs</code> to <code>identification_properties</code> and they are no longer
specific to USB but they can theoretically be any set of key/values:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board details arduino:samd:mkr1000
Board name:                Arduino MKR1000
FQBN:                      arduino:samd:mkr1000
Board version:             1.8.11
Debugging supported:       

Official Arduino board:    

Identification properties: vid=0x2341
                           pid=0x804e

Identification properties: vid=0x2341
                           pid=0x004e

Identification properties: vid=0x2341
                           pid=0x824e

Identification properties: vid=0x2341
                           pid=0x024e
[...]

$ arduino-cli board details arduino:samd:mkr1000 --format json
[...]
  &quot;identification_properties&quot;: [
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x804e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    },
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x004e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    },
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x824e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    },
    {
      &quot;properties&quot;: {
        &quot;pid&quot;: &quot;0x024e&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;
      }
    }
  ]
}
</code></pre></div>
<h3 id="change-of-behaviour-of-grpc-init-function">Change of behaviour of gRPC <code>Init</code> function<a class="headerlink" href="#change-of-behaviour-of-grpc-init-function" title="Permanent link">&para;</a></h3>
<p>Previously the <code>Init</code> function was used to both create a new <code>CoreInstance</code> and initialize it, so that the internal
package and library managers were already populated with all the information available from <code>*_index.json</code> files,
installed platforms and libraries and so on.</p>
<p>Now the initialization phase is split into two, first the client must create a new <code>CoreInstance</code> with the <code>Create</code>
function, that does mainly two things:</p>
<ul>
<li>create all folders necessary to correctly run the CLI if not already existing</li>
<li>create and return a new <code>CoreInstance</code></li>
</ul>
<p>The <code>Create</code> function will only fail if folders creation is not successful.</p>
<p>The returned instance is relatively unusable since no library and no platform is loaded, some functions that don't need
that information can still be called though.</p>
<p>The <code>Init</code> function has been greatly overhauled and it doesn't fail completely if one or more platforms or libraries
fail to load now.</p>
<p>Also the option <code>library_manager_only</code> has been removed, the package manager is always initialized and platforms are
loaded.</p>
<p>The <code>Init</code> was already a server-side streaming function but it would always return one and only one response, this has
been modified so that each response is either an error or a notification on the initialization process so that it works
more like an actual stream of information.</p>
<p>Previously a client would call the function like so:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">initReq</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">InitRequest</span><span class="p">()</span>
<span class="nx">initReq</span><span class="p">.</span><span class="nx">setLibraryManagerOnly</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">initResp</span> <span class="o">=</span> <span class="k">await</span> <span class="ow">new</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">InitResponse</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">resp</span>: <span class="kt">InitResponse</span> <span class="o">|</span> <span class="kc">undefined</span> <span class="o">=</span> <span class="kc">undefined</span>
  <span class="kd">const</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">initReq</span><span class="p">)</span>
  <span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span>: <span class="kt">InitResponse</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">resp</span> <span class="o">=</span> <span class="nx">data</span><span class="p">))</span>
  <span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">resp</span><span class="o">!</span><span class="p">))</span>
  <span class="nx">stream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">initResp</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">()</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">instance</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="ow">new</span> <span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Could not retrieve instance from the initialize response.&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Now something similar should be done.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">createReq</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">CreateRequest</span><span class="p">()</span>
<span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">createReq</span><span class="p">)</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">instance</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="ow">new</span> <span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Could not retrieve instance from the initialize response.&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">initReq</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">InitRequest</span><span class="p">()</span>
<span class="nx">initReq</span><span class="p">.</span><span class="nx">setInstance</span><span class="p">(</span><span class="nx">instance</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">initResp</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">initReq</span><span class="p">)</span>
<span class="nx">initResp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">o</span>: <span class="kt">InitResponse</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">downloadProgress</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getDownloadProgress</span><span class="p">()</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">downloadProgress</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle download progress</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">taskProgress</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getTaskProgress</span><span class="p">()</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">taskProgress</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle task progress</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">err</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getError</span><span class="p">()</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="k">await</span> <span class="ow">new</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">initResp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
  <span class="nx">initResp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>
<p>Previously if even one platform or library failed to load everything else would fail too, that doesn't happen anymore.
Now it's easier for both the CLI and the gRPC clients to handle gracefully platforms or libraries updates that might
break the initialization step and make everything unusable.</p>
<h3 id="removal-of-grpc-rescan-function">Removal of gRPC <code>Rescan</code> function<a class="headerlink" href="#removal-of-grpc-rescan-function" title="Permanent link">&para;</a></h3>
<p>The <code>Rescan</code> function has been removed, in its place the <code>Init</code> function must be used.</p>
<h3 id="change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions">Change of behaviour of gRPC <code>UpdateIndex</code> and <code>UpdateLibrariesIndex</code> functions<a class="headerlink" href="#change-of-behaviour-of-grpc-updateindex-and-updatelibrariesindex-functions" title="Permanent link">&para;</a></h3>
<p>Previously both <code>UpdateIndex</code> and <code>UpdateLibrariesIndex</code> functions implicitly called <code>Rescan</code> so that the internal
<code>CoreInstance</code> was updated with the eventual new information obtained in the update.</p>
<p>This behaviour is now removed and the internal <code>CoreInstance</code> must be explicitly updated by the gRPC client using the
<code>Init</code> function.</p>
<h3 id="removed-rarely-used-golang-api">Removed rarely used golang API<a class="headerlink" href="#removed-rarely-used-golang-api" title="Permanent link">&para;</a></h3>
<p>The following function from the <code>github.com/arduino/arduino-cli/arduino/libraries</code> module is no longer available:</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span> <span class="p">(</span><span class="nx">lm</span> <span class="o">*</span><span class="nx">LibrariesManager</span><span class="p">)</span> <span class="nx">UpdateIndex</span><span class="p">(</span><span class="nx">config</span> <span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Config</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">downloader</span><span class="p">.</span><span class="nx">Downloader</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</code></pre></div>
<p>We recommend using the equivalent gRPC API to perform the update of the index.</p>
<h2 id="0180">0.18.0<a class="headerlink" href="#0180" title="Permanent link">&para;</a></h2>
<h3 id="breaking-changes-in-grpc-api-and-cli-json-output">Breaking changes in gRPC API and CLI JSON output.<a class="headerlink" href="#breaking-changes-in-grpc-api-and-cli-json-output" title="Permanent link">&para;</a></h3>
<p>Starting from this release we applied a more rigorous and stricter naming conventions in gRPC API following the official
guidelines: <a href="https://developers.google.com/protocol-buffers/docs/style">https://developers.google.com/protocol-buffers/docs/style</a></p>
<p>We also started using a linter to implement checks for gRPC API style errors.</p>
<p>This provides a better consistency and higher quality API but inevitably introduces breaking changes.</p>
<h3 id="grpc-api-breaking-changes">gRPC API breaking changes<a class="headerlink" href="#grpc-api-breaking-changes" title="Permanent link">&para;</a></h3>
<p>Consumers of the gRPC API should regenerate their bindings and update all structures naming where necessary. Most of the
changes are trivial and falls into the following categories:</p>
<ul>
<li>Service names have been suffixed with <code>...Service</code> (for example <code>ArduinoCore</code> -&gt; <code>ArduinoCoreService</code>)</li>
<li>Message names suffix has been changed from <code>...Req</code>/<code>...Resp</code> to <code>...Request</code>/<code>...Response</code> (for example
  <code>BoardDetailsReq</code> -&gt; <code>BoardDetailsRequest</code>)</li>
<li>Enumerations now have their class name prefixed (for example the enumeration value <code>FLAT</code> in <code>LibraryLayout</code> has been
  changed to <code>LIBRARY_LAYOUT_FLAT</code>)</li>
<li>Use of lower-snake case on all fields (for example: <code>ID</code> -&gt; <code>id</code>, <code>FQBN</code> -&gt; <code>fqbn</code>, <code>Name</code> -&gt; <code>name</code>,
  <code>ArchiveFilename</code> -&gt; <code>archive_filename</code>)</li>
<li>Package names are now versioned (for example <code>cc.arduino.cli.commands</code> -&gt; <code>cc.arduino.cli.commands.v1</code>)</li>
<li>Repeated responses are now in plural form (<code>identification_pref</code> -&gt; <code>identification_prefs</code>, <code>platform</code> -&gt; <code>platforms</code>)</li>
</ul>
<h3 id="arduino-cli-json-output-breaking-changes">arduino-cli JSON output breaking changes<a class="headerlink" href="#arduino-cli-json-output-breaking-changes" title="Permanent link">&para;</a></h3>
<p>Consumers of the JSON output of the CLI must update their clients if they use one of the following commands:</p>
<ul>
<li>
<p>in <code>core search</code> command the following fields have been renamed:</p>
<ul>
<li><code>Boards</code> -&gt; <code>boards</code></li>
<li><code>Email</code> -&gt; <code>email</code></li>
<li><code>ID</code> -&gt; <code>id</code></li>
<li><code>Latest</code> -&gt; <code>latest</code></li>
<li><code>Maintainer</code> -&gt; <code>maintainer</code></li>
<li><code>Name</code> -&gt; <code>name</code></li>
<li><code>Website</code> -&gt; <code>website</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli core search Due --format json
[
  {
    &quot;id&quot;: &quot;arduino:sam&quot;,
    &quot;latest&quot;: &quot;1.6.12&quot;,
    &quot;name&quot;: &quot;Arduino SAM Boards (32-bits ARM Cortex-M3)&quot;,
    &quot;maintainer&quot;: &quot;Arduino&quot;,
    &quot;website&quot;: &quot;http://www.arduino.cc/&quot;,
    &quot;email&quot;: &quot;packages@arduino.cc&quot;,
    &quot;boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Due (Native USB Port)&quot;,
        &quot;fqbn&quot;: &quot;arduino:sam:arduino_due_x&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Due (Programming Port)&quot;,
        &quot;fqbn&quot;: &quot;arduino:sam:arduino_due_x_dbg&quot;
      }
    ]
  }
]
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board details</code> command the following fields have been renamed:</p>
<ul>
<li><code>identification_pref</code> -&gt; <code>identification_prefs</code></li>
<li><code>usbID</code> -&gt; <code>usb_id</code></li>
<li><code>PID</code> -&gt; <code>pid</code></li>
<li><code>VID</code> -&gt; <code>vid</code></li>
<li><code>websiteURL</code> -&gt; <code>website_url</code></li>
<li><code>archiveFileName</code> -&gt; <code>archive_filename</code></li>
<li><code>propertiesId</code> -&gt; <code>properties_id</code></li>
<li><code>toolsDependencies</code> -&gt; <code>tools_dependencies</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board details arduino:avr:uno --format json
{
  &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
  &quot;name&quot;: &quot;Arduino Uno&quot;,
  &quot;version&quot;: &quot;1.8.3&quot;,
  &quot;properties_id&quot;: &quot;uno&quot;,
  &quot;official&quot;: true,
  &quot;package&quot;: {
    &quot;maintainer&quot;: &quot;Arduino&quot;,
    &quot;url&quot;: &quot;https://downloads.arduino.cc/packages/package_index.json&quot;,
    &quot;website_url&quot;: &quot;http://www.arduino.cc/&quot;,
    &quot;email&quot;: &quot;packages@arduino.cc&quot;,
    &quot;name&quot;: &quot;arduino&quot;,
    &quot;help&quot;: {
      &quot;online&quot;: &quot;http://www.arduino.cc/en/Reference/HomePage&quot;
    }
  },
  &quot;platform&quot;: {
    &quot;architecture&quot;: &quot;avr&quot;,
    &quot;category&quot;: &quot;Arduino&quot;,
    &quot;url&quot;: &quot;http://downloads.arduino.cc/cores/avr-1.8.3.tar.bz2&quot;,
    &quot;archive_filename&quot;: &quot;avr-1.8.3.tar.bz2&quot;,
    &quot;checksum&quot;: &quot;SHA-256:de8a9b982477762d3d3e52fc2b682cdd8ff194dc3f1d46f4debdea6a01b33c14&quot;,
    &quot;size&quot;: 4941548,
    &quot;name&quot;: &quot;Arduino AVR Boards&quot;
  },
  &quot;tools_dependencies&quot;: [
    {
      &quot;packager&quot;: &quot;arduino&quot;,
      &quot;name&quot;: &quot;avr-gcc&quot;,
      &quot;version&quot;: &quot;7.3.0-atmel3.6.1-arduino7&quot;,
      &quot;systems&quot;: [
        {
          &quot;checksum&quot;: &quot;SHA-256:3903553d035da59e33cff9941b857c3cb379cb0638105dfdf69c97f0acc8e7b5&quot;,
          &quot;host&quot;: &quot;arm-linux-gnueabihf&quot;,
          &quot;archive_filename&quot;: &quot;avr-gcc-7.3.0-atmel3.6.1-arduino7-arm-linux-gnueabihf.tar.bz2&quot;,
          &quot;url&quot;: &quot;http://downloads.arduino.cc/tools/avr-gcc-7.3.0-atmel3.6.1-arduino7-arm-linux-gnueabihf.tar.bz2&quot;,
          &quot;size&quot;: 34683056
        },
        { ... }
      ]
    },
    { ... }
  ],
  &quot;identification_prefs&quot;: [
    {
      &quot;usb_id&quot;: {
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x0043&quot;
      }
    },
    { ... }
  ],
  &quot;programmers&quot;: [
    {
      &quot;platform&quot;: &quot;Arduino AVR Boards&quot;,
      &quot;id&quot;: &quot;parallel&quot;,
      &quot;name&quot;: &quot;Parallel Programmer&quot;
    },
    { ... }
  ]
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board listall</code> command the following fields have been renamed:</p>
<ul>
<li><code>FQBN</code> -&gt; <code>fqbn</code></li>
<li><code>Email</code> -&gt; <code>email</code></li>
<li><code>ID</code> -&gt; <code>id</code></li>
<li><code>Installed</code> -&gt; <code>installed</code></li>
<li><code>Latest</code> -&gt; <code>latest</code></li>
<li><code>Name</code> -&gt; <code>name</code></li>
<li><code>Maintainer</code> -&gt; <code>maintainer</code></li>
<li><code>Website</code> -&gt; <code>website</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board listall Uno --format json
{
  &quot;boards&quot;: [
    {
      &quot;name&quot;: &quot;Arduino Uno&quot;,
      &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
      &quot;platform&quot;: {
        &quot;id&quot;: &quot;arduino:avr&quot;,
        &quot;installed&quot;: &quot;1.8.3&quot;,
        &quot;latest&quot;: &quot;1.8.3&quot;,
        &quot;name&quot;: &quot;Arduino AVR Boards&quot;,
        &quot;maintainer&quot;: &quot;Arduino&quot;,
        &quot;website&quot;: &quot;http://www.arduino.cc/&quot;,
        &quot;email&quot;: &quot;packages@arduino.cc&quot;
      }
    }
  ]
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board search</code> command the following fields have been renamed:</p>
<ul>
<li><code>FQBN</code> -&gt; <code>fqbn</code></li>
<li><code>Email</code> -&gt; <code>email</code></li>
<li><code>ID</code> -&gt; <code>id</code></li>
<li><code>Installed</code> -&gt; <code>installed</code></li>
<li><code>Latest</code> -&gt; <code>latest</code></li>
<li><code>Name</code> -&gt; <code>name</code></li>
<li><code>Maintainer</code> -&gt; <code>maintainer</code></li>
<li><code>Website</code> -&gt; <code>website</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board search Uno --format json
[
  {
    &quot;name&quot;: &quot;Arduino Uno&quot;,
    &quot;fqbn&quot;: &quot;arduino:avr:uno&quot;,
    &quot;platform&quot;: {
      &quot;id&quot;: &quot;arduino:avr&quot;,
      &quot;installed&quot;: &quot;1.8.3&quot;,
      &quot;latest&quot;: &quot;1.8.3&quot;,
      &quot;name&quot;: &quot;Arduino AVR Boards&quot;,
      &quot;maintainer&quot;: &quot;Arduino&quot;,
      &quot;website&quot;: &quot;http://www.arduino.cc/&quot;,
      &quot;email&quot;: &quot;packages@arduino.cc&quot;
    }
  }
]
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>lib deps</code> command the following fields have been renamed:</p>
<ul>
<li><code>versionRequired</code> -&gt; <code>version_required</code></li>
<li><code>versionInstalled</code> -&gt; <code>version_installed</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli lib deps Arduino_MKRIoTCarrier --format json
{
  &quot;dependencies&quot;: [
    {
      &quot;name&quot;: &quot;Adafruit seesaw Library&quot;,
      &quot;version_required&quot;: &quot;1.3.1&quot;
    },
    {
      &quot;name&quot;: &quot;SD&quot;,
      &quot;version_required&quot;: &quot;1.2.4&quot;,
      &quot;version_installed&quot;: &quot;1.2.3&quot;
    },
    { ... }
  ]
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>lib search</code> command the following fields have been renamed:</p>
<ul>
<li><code>archivefilename</code> -&gt; <code>archive_filename</code></li>
<li><code>cachepath</code> -&gt; <code>cache_path</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli lib search NTPClient --format json
{
  &quot;libraries&quot;: [
    {
      &quot;name&quot;: &quot;NTPClient&quot;,
      &quot;releases&quot;: {
        &quot;1.0.0&quot;: {
          &quot;author&quot;: &quot;Fabrice Weinberg&quot;,
          &quot;version&quot;: &quot;1.0.0&quot;,
          &quot;maintainer&quot;: &quot;Fabrice Weinberg \u003cfabrice@weinberg.me\u003e&quot;,
          &quot;sentence&quot;: &quot;An NTPClient to connect to a time server&quot;,
          &quot;paragraph&quot;: &quot;Get time from a NTP server and keep it in sync.&quot;,
          &quot;website&quot;: &quot;https://github.com/FWeinb/NTPClient&quot;,
          &quot;category&quot;: &quot;Timing&quot;,
          &quot;architectures&quot;: [
            &quot;esp8266&quot;
          ],
          &quot;types&quot;: [
            &quot;Arduino&quot;
          ],
          &quot;resources&quot;: {
            &quot;url&quot;: &quot;https://downloads.arduino.cc/libraries/github.com/arduino-libraries/NTPClient-1.0.0.zip&quot;,
            &quot;archive_filename&quot;: &quot;NTPClient-1.0.0.zip&quot;,
            &quot;checksum&quot;: &quot;SHA-256:b1f2907c9d51ee253bad23d05e2e9c1087ab1e7ba3eb12ee36881ba018d81678&quot;,
            &quot;size&quot;: 6284,
            &quot;cache_path&quot;: &quot;libraries&quot;
          }
        },
        &quot;2.0.0&quot;: { ... },
        &quot;3.0.0&quot;: { ... },
        &quot;3.1.0&quot;: { ... },
        &quot;3.2.0&quot;: { ... }
      },
      &quot;latest&quot;: {
        &quot;author&quot;: &quot;Fabrice Weinberg&quot;,
        &quot;version&quot;: &quot;3.2.0&quot;,
        &quot;maintainer&quot;: &quot;Fabrice Weinberg \u003cfabrice@weinberg.me\u003e&quot;,
        &quot;sentence&quot;: &quot;An NTPClient to connect to a time server&quot;,
        &quot;paragraph&quot;: &quot;Get time from a NTP server and keep it in sync.&quot;,
        &quot;website&quot;: &quot;https://github.com/arduino-libraries/NTPClient&quot;,
        &quot;category&quot;: &quot;Timing&quot;,
        &quot;architectures&quot;: [
          &quot;*&quot;
        ],
        &quot;types&quot;: [
          &quot;Arduino&quot;
        ],
        &quot;resources&quot;: {
          &quot;url&quot;: &quot;https://downloads.arduino.cc/libraries/github.com/arduino-libraries/NTPClient-3.2.0.zip&quot;,
          &quot;archive_filename&quot;: &quot;NTPClient-3.2.0.zip&quot;,
          &quot;checksum&quot;: &quot;SHA-256:122d00df276972ba33683aff0f7fe5eb6f9a190ac364f8238a7af25450fd3e31&quot;,
          &quot;size&quot;: 7876,
          &quot;cache_path&quot;: &quot;libraries&quot;
        }
      }
    }
  ],
  &quot;status&quot;: 1
}
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p>in <code>board list</code> command the following fields have been renamed:</p>
<ul>
<li><code>FQBN</code> -&gt; <code>fqbn</code></li>
<li><code>VID</code> -&gt; <code>vid</code></li>
<li><code>PID</code> -&gt; <code>pid</code></li>
</ul>
<p>The new output is like:</p>
<div class="highlight"><pre><span></span><code>$ arduino-cli board list --format json
[
  {
    &quot;address&quot;: &quot;/dev/ttyACM0&quot;,
    &quot;protocol&quot;: &quot;serial&quot;,
    &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
    &quot;boards&quot;: [
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino:mbed:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino-dev:mbed:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino-dev:nrf52:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      },
      {
        &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
        &quot;fqbn&quot;: &quot;arduino-beta:mbed:nano33ble&quot;,
        &quot;vid&quot;: &quot;0x2341&quot;,
        &quot;pid&quot;: &quot;0x805a&quot;
      }
    ],
    &quot;serial_number&quot;: &quot;BECC45F754185EC9&quot;
  }
]
$ arduino-cli board list -w --format json
{
  &quot;type&quot;: &quot;add&quot;,
  &quot;address&quot;: &quot;/dev/ttyACM0&quot;,
  &quot;protocol&quot;: &quot;serial&quot;,
  &quot;protocol_label&quot;: &quot;Serial Port (USB)&quot;,
  &quot;boards&quot;: [
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino-dev:nrf52:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    },
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino-dev:mbed:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    },
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino-beta:mbed:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    },
    {
      &quot;name&quot;: &quot;Arduino Nano 33 BLE&quot;,
      &quot;fqbn&quot;: &quot;arduino:mbed:nano33ble&quot;,
      &quot;vid&quot;: &quot;0x2341&quot;,
      &quot;pid&quot;: &quot;0x805a&quot;
    }
  ],
  &quot;serial_number&quot;: &quot;BECC45F754185EC9&quot;
}
{
  &quot;type&quot;: &quot;remove&quot;,
  &quot;address&quot;: &quot;/dev/ttyACM0&quot;
}
</code></pre></div>
</li>
</ul>
<h2 id="0160">0.16.0<a class="headerlink" href="#0160" title="Permanent link">&para;</a></h2>
<h3 id="change-type-of-compilereqexportbinaries-message-in-grpc-interface">Change type of <code>CompileReq.ExportBinaries</code> message in gRPC interface<a class="headerlink" href="#change-type-of-compilereqexportbinaries-message-in-grpc-interface" title="Permanent link">&para;</a></h3>
<p>This change affects only the gRPC consumers.</p>
<p>In the <code>CompileReq</code> message the <code>export_binaries</code> property type has been changed from <code>bool</code> to
<code>google.protobuf.BoolValue</code>. This has been done to handle settings bindings by gRPC consumers and the CLI in the same
way so that they an identical behaviour.</p>
<h2 id="0150">0.15.0<a class="headerlink" href="#0150" title="Permanent link">&para;</a></h2>
<h3 id="rename-telemetry-settings-to-metrics">Rename <code>telemetry</code> settings to <code>metrics</code><a class="headerlink" href="#rename-telemetry-settings-to-metrics" title="Permanent link">&para;</a></h3>
<p>All instances of the term <code>telemetry</code> in the code and the documentation has been changed to <code>metrics</code>. This has been
done to clarify that no data is currently gathered from users of the CLI.</p>
<p>To handle this change the users must edit their config file, usually <code>arduino-cli.yaml</code>, and change the <code>telemetry</code> key
to <code>metrics</code>. The modification must be done by manually editing the file using a text editor, it can't be done via CLI.
No other action is necessary.</p>
<p>The default folders for the <code>arduino-cli.yaml</code> are:</p>
<ul>
<li>Linux: <code>/home/&lt;your_username&gt;/.arduino15/arduino-cli.yaml</code></li>
<li>OS X: <code>/Users/&lt;your_username&gt;/Library/Arduino15/arduino-cli.yaml</code></li>
<li>Windows: <code>C:\Users\&lt;your_username&gt;\AppData\Local\Arduino15\arduino-cli.yaml</code></li>
</ul>
<h2 id="0140">0.14.0<a class="headerlink" href="#0140" title="Permanent link">&para;</a></h2>
<h3 id="changes-in-debug-command">Changes in <code>debug</code> command<a class="headerlink" href="#changes-in-debug-command" title="Permanent link">&para;</a></h3>
<p>Previously it was required:</p>
<ul>
<li>To provide a debug command line recipe in <code>platform.txt</code> like <code>tools.reciped-id.debug.pattern=.....</code> that will start a
  <code>gdb</code> session for the selected board.</li>
<li>To add a <code>debug.tool</code> definition in the <code>boards.txt</code> to recall that recipe, for example <code>myboard.debug.tool=recipe-id</code></li>
</ul>
<p>Now:</p>
<ul>
<li>Only the configuration needs to be supplied, the <code>arduino-cli</code> or the GUI tool will figure out how to call and setup
  the <code>gdb</code> session. An example of configuration is the following:</li>
</ul>
<div class="highlight"><pre><span></span><code>debug.executable={build.path}/{build.project_name}.elf
debug.toolchain=gcc
debug.toolchain.path={runtime.tools.arm-none-eabi-gcc-7-2017q4.path}/bin/
debug.toolchain.prefix=arm-none-eabi-
debug.server=openocd
debug.server.openocd.path={runtime.tools.openocd-0.10.0-arduino7.path}/bin/
debug.server.openocd.scripts_dir={runtime.tools.openocd-0.10.0-arduino7.path}/share/openocd/scripts/
debug.server.openocd.script={runtime.platform.path}/variants/{build.variant}/{build.openocdscript}
</code></pre></div>
<p>The <code>debug.server.XXXX</code> subkeys are optional and also "free text", this means that the configuration may be extended as
needed by the specific server. For now only <code>openocd</code> is supported. Anyway, if this change works, any other kind of
server may be fairly easily added.</p>
<p>The <code>debug.xxx=yyy</code> definitions above may be supplied and overlayed in the usual ways:</p>
<ul>
<li>on <code>platform.txt</code>: definition here will be shared through all boards in the platform</li>
<li>on <code>boards.txt</code> as part of a board definition: they will override the global platform definitions</li>
<li>on <code>programmers.txt</code>: they will override the boards and global platform definitions if the programmer is selected</li>
</ul>
<h3 id="binaries-export-must-now-be-explicitly-specified">Binaries export must now be explicitly specified<a class="headerlink" href="#binaries-export-must-now-be-explicitly-specified" title="Permanent link">&para;</a></h3>
<p>Previously, if the <code>--build-path</code> was not specified, compiling a Sketch would copy the generated binaries in
<code>&lt;sketch_folder&gt;/build/&lt;fqbn&gt;/</code>, uploading to a board required that path to exist and contain the necessary binaries.</p>
<p>The <code>--dry-run</code> flag was removed.</p>
<p>The default, <code>compile</code> does not copy generated binaries to the sketch folder. The <code>--export-binaries</code> (<code>-e</code>) flag was
introduced to copy the binaries from the build folder to the sketch one. <code>--export-binaries</code> is not required when using
the <code>--output-dir</code> flag. A related configuration key and environment variable has been added to avoid the need to always
specify the <code>--export-binaries</code> flag: <code>sketch.always_export_binaries</code> and <code>ARDUINO_SKETCH_ALWAYS_EXPORT_BINARIES</code>.</p>
<p>If <code>--input-dir</code> or <code>--input-file</code> is not set when calling <code>upload</code> the command will search for the deterministically
created build directory in the temp folder and use the binaries found there.</p>
<p>The gRPC interface has been updated accordingly, <code>dryRun</code> is removed.</p>
<h3 id="programmers-cant-be-listed-anymore-using-burn-bootloader-p-list">Programmers can't be listed anymore using <code>burn-bootloader -P list</code><a class="headerlink" href="#programmers-cant-be-listed-anymore-using-burn-bootloader-p-list" title="Permanent link">&para;</a></h3>
<p>The <code>-P</code> flag is used to select the programmer used to burn the bootloader on the specified board. Using <code>-P list</code> to
list all the possible programmers for the current board was hackish.</p>
<p>This way has been removed in favour of <code>board details &lt;fqbn&gt; --list-programmers</code>.</p>
<h3 id="lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled"><code>lib install --git-url</code> and <code>--zip-file</code> must now be explicitly enabled<a class="headerlink" href="#lib-install-git-url-and-zip-file-must-now-be-explicitly-enabled" title="Permanent link">&para;</a></h3>
<p>With the introduction of the <code>--git-url</code> and <code>--zip-file</code> flags the new config key <code>library.enable_unsafe_install</code> has
been added to enable them.</p>
<p>This changes the ouput of the <code>config dump</code> command.</p>
<h3 id="change-behaviour-of-config-file-flag-with-config-commands">Change behaviour of <code>--config-file</code> flag with <code>config</code> commands<a class="headerlink" href="#change-behaviour-of-config-file-flag-with-config-commands" title="Permanent link">&para;</a></h3>
<p>To create a new config file with <code>config init</code> one must now use <code>--dest-dir</code> or the new <code>--dest-file</code> flags. Previously
the config file would always be overwritten by this command, now it fails if the it already exists, to force the
previous behaviour the user must set the <code>--overwrite</code> flag.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="../getting-started/" class="md-footer__link md-footer__link--next" aria-label="Next: Getting started" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Getting started
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright 2020 ARDUINO SA (http://www.arduino.cc/)
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>